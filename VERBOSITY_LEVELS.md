# Verbosity Levels Implementation

## Overview

The Notion Agent now supports granular verbosity levels to control output detail, replacing the simple boolean `verbose` flag with a more flexible system.

## Verbosity Levels

### `silent`
- **Purpose**: Minimal output, only critical errors and warnings
- **Use Case**: Automated scripts, background processes
- **Output**: Error messages and warnings only

### `minimal`
- **Purpose**: Timestamps only for tracking progress
- **Use Case**: When you need to know the agent is working but don't want detailed output
- **Output**: Timestamps for each significant operation

### `default` (default)
- **Purpose**: Standard user-friendly output
- **Use Case**: Normal interactive use
- **Output**: Progress messages, results, and status updates

### `verbose`
- **Purpose**: Detailed debugging output
- **Use Case**: Development, debugging, understanding agent behavior
- **Output**: All of default plus tool calls, timing information, internal state changes

## Usage

### Command Line

```bash
# Minimal output (timestamps only)
python -m src.agent --verbosity=minimal "extract recipes"

# Silent mode (errors only)
python -m src.agent --verbosity=silent "extract recipes"

# Default mode
python -m src.agent "extract recipes"

# Verbose mode (detailed)
python -m src.agent --verbosity=verbose "extract recipes"
# OR shorthand
python -m src.agent --verbose "extract recipes"
```

### Programmatic

```python
from src.agent import create_agent

# Minimal verbosity
agent = create_agent(verbosity="minimal")

# Silent mode
agent = create_agent(verbosity="silent")

# Default mode
agent = create_agent(verbosity="default")

# Verbose mode
agent = create_agent(verbosity="verbose")

# Backward compatible (deprecated)
agent = create_agent(verbose=True)  # Same as verbosity="verbose"
```

## Implementation Details

### Modified Files

1. **src/output/logger.py**
   - Added `VerbosityLevel` type
   - Added `verbosity` parameter to `ExtractionLogger`
   - Implemented conditional logging based on verbosity level
   - Minimal mode prints only timestamps

2. **src/agent/core.py**
   - Added `VerbosityLevel` type
   - Added `verbosity` parameter to `NotionAgent.__init__` and `create_agent`
   - Maintains backward compatibility with `verbose` boolean parameter

3. **src/agent/responses_client.py**
   - Added `VerbosityLevel` type
   - Added `verbosity` parameter to `ResponsesAPIClient.__init__`
   - Passes verbosity to underlying clients

4. **src/agent/computer_use_client.py**
   - Added `VerbosityLevel` type
   - Added `verbosity` parameter to `ComputerUseClient.__init__`

5. **src/agent/cli.py**
   - Added `--verbosity` option with choices
   - Maintained `--verbose` flag for backward compatibility

6. **examples/agent_usage.py**
   - Updated all examples to use `verbosity` parameter
   - Added new examples: `example_minimal_verbosity()` and `example_silent_mode()`

7. **Documentation**
   - Updated `docs/agent/AGENT_README.md`
   - Updated main `README.md`

## Screenshot Storage

**Important**: Screenshots are NOT saved to disk files. They are only kept in memory as base64-encoded strings in the agent state. This reduces disk usage and improves performance.

The existing screenshots in `output/agent_screenshots/` are from previous runs and are not automatically generated by the current implementation.

## Migration Guide

### For Users

The `--verbose` flag still works as before but is deprecated. Use `--verbosity=verbose` instead:

```bash
# Old (still works)
python -m src.agent --verbose "extract recipes"

# New (recommended)
python -m src.agent --verbosity=verbose "extract recipes"
```

### For Developers

Replace `verbose` parameter with `verbosity`:

```python
# Old (still works)
agent = create_agent(verbose=True)

# New (recommended)
agent = create_agent(verbosity="verbose")

# New options
agent = create_agent(verbosity="minimal")
agent = create_agent(verbosity="silent")
```

## Benefits

1. **Fine-grained control**: Four levels instead of two (on/off)
2. **Better automation**: Silent mode for scripts that need minimal output
3. **Progress tracking**: Minimal mode for long-running tasks
4. **Backward compatible**: Old `verbose` parameter still works
5. **Cleaner logs**: Appropriate detail level for each use case

